# Udemy Micro Front-ends

My code for Udemy course: https://www.udemy.com/course/microfrontend-course

Remember to restart container after changes in ModuleFederationPlugin config

1. Separate React apps for small parts of our big application, each with own webpack.config.js for Module Federation configuration
2. We need one Container to load other small parts (remoteEntry.js) and display them. Only index.html from Container is used on Production (other parts of our micro-FE share this file). During development we use index.html from specific app when we want to run only this part without container.
3. To share State for all remote entries we can use Redux / Context in Container or create separate micro-frontend app just for common State.
4. **Shared Modules** - when many micro-fe apps use the same node modules we can share them and let Container load only one instance of duplicated module. We add `shared` array with modules names to webpack.config.js of remote entries (not to container) in ModuleFederationPlugin config object. But... shared modules would not be loaded when we start remote entries directly (not by container) and we get this error: `Shared module is not available for eager consumption`. To fix this we have to import asynchronously our code inside micro-app to let Webpack wait until it has access to loaded modules. To import async we just need to use `import('./bootstrap')` as a function, not as normal `import './bootstrap'`. In container Webpack will already have Module imported and it will not import it two times so we still will load module only once.
5. **Shared Module Versioning** if for some reason our micro-apps needs to use different versions of some Module then Webpack will check in package.json of this remote entries which versions are acceptable. If in package.json files we have the same major version but different minor version (ex. 5.0.0 and 5.1.0) Webpack check if different minor versions are accepted (so if we have `^` in front of version in package.json ex. `^5.0.0`). If yes, Webpack will load one version of module (the newest acceptable). If not then Webpack will load separate versions to fullfil needs of all apps. PS. for patch versions we use `~` sign, so `~5.0.0` match `5.0.3` but doesn't match `5.1.0`.
6. **Singleton Module Loading** some modules (like React) can be loaded only in one instance. If our Container would load React from many remote entries we will get error from React. For this we can use different syntax in webpack.config.js to specify shared modules (instead of array with module names as strings we use object with singleton option `true` for specific module, like this one: `shared: { react: { singleton: true } }`). But... if we have different versions of singleton module in some remote entry (like `^5.0.0.` and `^4.1.0`) Webpack will load only one version (newer?) and show a Warning: `Unsatisfied version 5.0.0 of shared singleton module faker (required ^4.1.0)` (it's not an Error, so App will run but we can have some errors because one app is running different version then specified in package.json)
